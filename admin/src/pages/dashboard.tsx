import React from "react";
import { Heading } from "@chakra-ui/layout";
import Head from "next/head";
import StatComponent from "../components/Stats/MainStat";
import TableComponent from "../components/Table/Table";
import { Skeleton } from "@chakra-ui/skeleton";
import { useGQLQuery } from "../shared-hooks/useGQLQuery";
import DesktopLayout from "../layouts/DesktopLayout";
import { useUserStore } from "../store/useUserStore";
import { GET_USER } from "../graphql/user";
import { useToast, Box, Text } from "@chakra-ui/react";

const DashboardPage = () => {
  const userID = useUserStore((state) => state.userID);

  const { data, error, isLoading, isSuccess, isFetching } = useGQLQuery(
    "get-unique-user",
    GET_USER,
    {
      id: userID,
    }
  );

  const stats = [
    {
      label: "Total Orders",
      value: 10,
    },
  ];

  const toast = useToast();
  const toastId = "notice-toast";

  // const rebranding = () => {
  //   if (!toast.isActive(toastId)) {
  //     toast({
  //       position: "top",
  //       duration: 2500,
  //       isClosable: true,
  //       render: () => (
  //         <Box bg="black" color="white" p={4} rounded="xl">
  //           <Text fontWeight={"semibold"}>Announcement ðŸŽ‰</Text>
  //           <Text fontWeight={"normal"}>TezzBites is now Fondoo!</Text>
  //         </Box>
  //       ),
  //     });
  //   }
  // };

  return (
    <div>
      <Head>
        <title>Fondoo</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <DesktopLayout>
        <Skeleton isLoaded={!isLoading}>
          <Heading mb={6}>Dashboard</Heading>
        </Skeleton>
        <Skeleton isLoaded={!isLoading}>
          <StatComponent data={stats} />
        </Skeleton>
        <Skeleton isLoaded={!isLoading}>
          <TableComponent />
        </Skeleton>
      </DesktopLayout>
    </div>
  );
};

export default DashboardPage;
